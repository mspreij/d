# disable the fucking cow:
make a file ansible.cfg with
  [defaults]
  nocows = True

$ alias ap='ansible-playbook -i inventory.yml --vault-password-file secrets/password' \e[36m# or something\e[0m
$ ap playbook.yml --syntax-check \e[36m# just check it without running\e[0m

# Commandline tools list
https://docs.ansible.com/ansible/latest/command_guide/index.html

# what collections are installed?
$ ansible-galaxy collection list | less
# note that collections in $HOME/.ansible can override the default ones

# install/update a collection (guessing the --force updates harder?)
ansible-galaxy collection install containers.podman --force

# what modules does a particular collection have?
ansible-doc -l -t module | grep \e[32mcontainers.podman\e[0m

# Specify roles in playbook:
- name: random playbook
  roles:
    - \e[32;1mfoo\e[0m           # regular role names
    - \e[32;1mbar\e[0m
    - role: \e[32;1mfoobar\e[0m  # extended format: allows vars, tags, etc. (but \e[1mnot\e[0m 'when')
      vars:
        var_specific_to_foobar: 123
# \e[38;5;208mroles\e[0m here, is \e[1msyntactic sugar\e[0m that converts to
- name: random playbook
  tasks:
    - \e[38;5;201mimport_role\e[0m:
        name: foobar
# \e[1mimport_role\e[0m is different from \e[38;5;208minclude_role\e[0m: the latter is slower because it's parsed at runtime,
# and allows 'when', 'loop' and variables.


## Shitty examples:

# run only a specific task file, NOT tied to any role context
# vars, defaults and dependencies from its role will not load.
- name: do some shit
  become: true
  gather_facts: true
  hosts:
    - mercury
  tasks:
    - include_tasks: roles/container-webhost/tasks/firewall.yml

# run a specific task with full role context:
- name: do some shit
  become: true
  gather_facts: true
  hosts:
    - mercury
  tasks:
    - \e[38;5;201mimport_role\e[0m:
        name: container-webhost
        tasks_from: firewall.yml \e[36m# only static filenames allowed\e[0m

# run a specific task with full role context with added flexibility:
- name: do some shit
  become: true
  gather_facts: true
  hosts:
    - mercury
  tasks:
    - \e[38;5;201minclude_role\e[0m:
        name: container-webhost
        tasks_from: "{{ tasks_for_host }}" \e[36m# supports variables\e[0m
